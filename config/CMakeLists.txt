cmake_minimum_required(VERSION 3.10.0)

project(Liri
    DESCRIPTION "Liri"
    LANGUAGES CXX C
)

## Add some paths to check for CMake modules:
set(LIRI_LOCAL_ECM TRUE)
list(APPEND CMAKE_MODULE_PATH "${CMAKE_CURRENT_SOURCE_DIR}/libraries/cmake-shared/modules")

## Liri specific setup common for all modules:
include(LiriSetup)

## Add sub-projects (respect dependency order):
add_subdirectory(libraries/cmake-shared)
if(EXISTS libraries/fluid)
    add_subdirectory(libraries/fluid)
endif()
if(UNIX AND NOT ANDROID)
    if(EXISTS libraries/qtaccountsservice)
        add_subdirectory(libraries/qtaccountsservice)
    endif()
    if(EXISTS libraries/qtudev)
        add_subdirectory(libraries/qtudev)
    endif()
    if(EXISTS libraries/qtgsettings)
        add_subdirectory(libraries/qtgsettings)
    endif()
    if(EXISTS desktop/libliri)
        add_subdirectory(desktop/libliri)
    endif()
    if(EXISTS apps/appcenter)
        add_subdirectory(apps/appcenter)
    endif()
endif()
if(EXISTS apps/browser)
    add_subdirectory(apps/browser)
endif()
if(EXISTS apps/calculator)
    add_subdirectory(apps/calculator)
endif()
if(EXISTS apps/files)
    add_subdirectory(apps/files)
endif()
if(EXISTS apps/text)
    add_subdirectory(apps/text)
endif()
if(EXISTS apps/terminal)
    add_subdirectory(apps/terminal)
endif()
if(UNIX AND NOT ANDROID)
    if(EXISTS desktop/eglfs)
        add_subdirectory(desktop/eglfs)
    endif()
    if(EXISTS desktop/platformtheme)
        add_subdirectory(desktop/platformtheme)
    endif()
    if(EXISTS desktop/session)
        add_subdirectory(desktop/session)
    endif()
    if(EXISTS desktop/networkmanager)
        add_subdirectory(desktop/networkmanager)
    endif()
    if(EXISTS desktop/pulseaudio)
        add_subdirectory(desktop/pulseaudio)
    endif()
    if(EXISTS desktop/power-manager)
        add_subdirectory(desktop/power-manager)
    endif()
    if(EXISTS desktop/qml-xwayland)
        add_subdirectory(desktop/qml-xwayland)
    endif()
    if(EXISTS desktop/screencast)
        add_subdirectory(desktop/screencast)
    endif()
    if(EXISTS desktop/screenshot)
        add_subdirectory(desktop/screenshot)
    endif()
    if(EXISTS desktop/settings)
        add_subdirectory(desktop/settings)
    endif()
    if(EXISTS desktop/shell)
        add_subdirectory(desktop/shell)
    endif()
    if(EXISTS desktop/initial-setup)
        add_subdirectory(desktop/initial-setup)
    endif()
    if(EXISTS desktop/xdg-desktop-portal-liri)
        add_subdirectory(desktop/xdg-desktop-portal-liri)
    endif()
    if(EXISTS desktop/themes)
        add_subdirectory(desktop/themes)
    endif()
endif()
if(EXISTS desktop/wallpapers)
    add_subdirectory(desktop/wallpapers)
endif()
if(LINUX AND NOT ANDROID)
    if(EXISTS os/calamares-branding)
        add_subdirectory(os/calamares-branding)
    endif()
endif()
